====
outl
====

|nimble-version| |nimble-install| |gh-actions|

WIP

.. contents:: Table of contents

Usage
=====

.. code-block:: shell

   $ echo "2021/01/01T00:00:00+09:00,2021/01/01T00:01:10+09:00" | outl -F , date sub 2 1
   70

   $ echo "2021/01/01T00:00:00+09:00,2021/01/01T00:01:10+09:00" | outl -F , date sub --append 2 1
   2021/01/01T00:00:00+09:00,2021/01/01T00:01:10+09:00,70

   $ echo "2021/01/01T00:00:00+09:00,2021/01/01T00:01:10+09:00" | outl -F , date sub -a --format datetime 2 1
   2021/01/01T00:00:00+09:00,2021/01/01T00:01:10+09:00,00:01:10

   $ echo '"2021/01/01T00:00:00+09:00","2021/01/01T00:01:10+09:00"' | outl --csv date sub -a --format datetime 2 1
   "2021/01/01T00:00:00+09:00","2021/01/01T00:01:10+09:00","00:01:10"

   $ echo "2021/01/01T00:00:00+09:00,2021/01/01T00:01:10+09:00" | outl -F , date print -a -p year -p month -p day -p hour -p minute -p second 1
   2021/01/01T00:00:00+09:00,2021/01/01T00:01:10+09:00,2020,01,01,00,00,00

   $ seq 10 | outl aggregate
   count	min	max	sum	average
   10	1.0	10.0	55.0	5.5

   $ seq 10 | outl aggregate 1
   count	min	max	sum	average
   10	1.0	10.0	55.0	5.5

   $ cat << EOS | outl aggregate --group_by 2 3
   1	A001	100
   2	A001	200
   3	A001	300
   4	A002	400
   5	A002	500
   6	A003	600
   EOS
   key	count	min	max	sum	average
   A001	3	100	300	600	200
   A002	2	400	500	900	450
   A003	1	600	600	600	600

   $ cat << EOS | outl aggregate --group_by 2,3,4 --key-delimiter - 5
   1	2020	01	01	100
   2	2020	01	01	200
   3	2020	01	01	300
   4	2020	01	02	400
   5	2020	01	02	500
   6	2020	01	03	600
   EOS
   key	count	min	max	sum	average
   2020-01-01	3	100	300	600	200
   2020-01-02	2	400	500	900	450
   2020-01-03	1	600	600	600	600

   # default is round up
   $ echo "1,2.4,2.5,04" | outl -F , format int
   1,2,3,4

   $ echo "1,2.4,2.5,04" | outl -F , format int 2
   1,2,2.5,4

   $ echo "1,2.4,2.5,04" | outl -F , format int 3
   1,2.4,3,4

   $ echo "1,2.4,2.5,04" | outl -F , format int --padding 0 --digit 3
   001,002,003,004

   $ echo "1,2.4,2.5,04" | outl -F , format int --round ceil
   1,3,3,4

   $ echo "1,2.4,2.5,04" | outl -F , format int --round floor
   1,2,2,4

   $ echo "2020/01/01,2020-01-01,Fri Jan 1 10:00:00 JST 2021" | outl -F , format date --format iso8601
   2020-01-01T00:00:00+09:00,2020-01-01T00:00:00+09:00,2020-01-01T10:00:00+09:00

   $ echo "2020/01/01,2020-01-01,Fri Jan 1 10:00:00 JST 2021" | outl -F , format date --format iso8601 3
   2020/01/01,2020-01-01,2020-01-01T10:00:00+09:00

Installation
============

TBD

LICENSE
=======

MIT

Development
===========

Release workflow
^^^^^^^^^^^^^^^^

GitHub Action runs when you pushed new tags.

.. code-block:: shell

   $ git tag <new_tag>
   $ git push origin <new_tag>

   or

   $ git push origin --tags

GitHub Action creates a new release and upload your assets.

Release workflows:

|image-release-workflow|

Release note will be generated by `git-chglog <https://github.com/git-chglog/git-chglog>`_.
Config files are `.chglog <./.chglog>`_.

Details, see `release.yml <./.github/workflows/release.yml>`_.

.. |gh-actions| image:: https://github.com/jiro4989/outl/workflows/test/badge.svg
   :target: https://github.com/jiro4989/outl/actions
.. |nimble-version| image:: https://nimble.directory/ci/badges/outl/version.svg
   :target: https://nimble.directory/ci/badges/outl/nimdevel/output.html
.. |nimble-install| image:: https://nimble.directory/ci/badges/outl/nimdevel/status.svg
   :target: https://nimble.directory/ci/badges/outl/nimdevel/output.html

.. |image-release-workflow| image:: https://user-images.githubusercontent.com/13825004/87944618-9897fc00-cada-11ea-9401-74167f04b5c4.png
